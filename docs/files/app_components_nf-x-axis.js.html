<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>app/components/nf-x-axis.js - ember-nf-graph</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="ember-nf-graph" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/components.nf-area.html">components.nf-area</a></li>
                                <li><a href="../classes/components.nf-area-stack.html">components.nf-area-stack</a></li>
                                <li><a href="../classes/components.nf-bars.html">components.nf-bars</a></li>
                                <li><a href="../classes/components.nf-crosshair.html">components.nf-crosshair</a></li>
                                <li><a href="../classes/components.nf-dot.html">components.nf-dot</a></li>
                                <li><a href="../classes/components.nf-gg.html">components.nf-gg</a></li>
                                <li><a href="../classes/components.nf-graph.html">components.nf-graph</a></li>
                                <li><a href="../classes/components.nf-graph-content.html">components.nf-graph-content</a></li>
                                <li><a href="../classes/components.nf-horizontal-line.html">components.nf-horizontal-line</a></li>
                                <li><a href="../classes/components.nf-line.html">components.nf-line</a></li>
                                <li><a href="../classes/components.nf-plot.html">components.nf-plot</a></li>
                                <li><a href="../classes/components.nf-range-marker.html">components.nf-range-marker</a></li>
                                <li><a href="../classes/components.nf-range-markers.html">components.nf-range-markers</a></li>
                                <li><a href="../classes/components.nf-right-tick.html">components.nf-right-tick</a></li>
                                <li><a href="../classes/components.nf-selection-box.html">components.nf-selection-box</a></li>
                                <li><a href="../classes/components.nf-svg-image.html">components.nf-svg-image</a></li>
                                <li><a href="../classes/components.nf-svg-line.html">components.nf-svg-line</a></li>
                                <li><a href="../classes/components.nf-svg-path.html">components.nf-svg-path</a></li>
                                <li><a href="../classes/components.nf-svg-rect.html">components.nf-svg-rect</a></li>
                                <li><a href="../classes/components.nf-vertical-line.html">components.nf-vertical-line</a></li>
                                <li><a href="../classes/components.nf-x-axis.html">components.nf-x-axis</a></li>
                                <li><a href="../classes/components.nf-y-axis.html">components.nf-y-axis</a></li>
                                <li><a href="../classes/components.nf-y-diff.html">components.nf-y-diff</a></li>
                                <li><a href="../classes/components.{nf-scroll-area}.html">components.{nf-scroll-area}</a></li>
                                <li><a href="../classes/mixins.graph-area-utils.html">mixins.graph-area-utils</a></li>
                                <li><a href="../classes/mixins.graph-data-graphic.html">mixins.graph-data-graphic</a></li>
                                <li><a href="../classes/mixins.graph-graphic-with-tracking-dot.html">mixins.graph-graphic-with-tracking-dot</a></li>
                                <li><a href="../classes/mixins.graph-has-graph-parent.html">mixins.graph-has-graph-parent</a></li>
                                <li><a href="../classes/mixins.graph-line-utils.html">mixins.graph-line-utils</a></li>
                                <li><a href="../classes/mixins.graph-registered-graphic.html">mixins.graph-registered-graphic</a></li>
                                <li><a href="../classes/mixins.graph-requires-scale-source.html">mixins.graph-requires-scale-source</a></li>
                                <li><a href="../classes/mixins.graph-selectable-graphic.html">mixins.graph-selectable-graphic</a></li>
                                <li><a href="../classes/utils.nf.graph-event.html">utils.nf.graph-event</a></li>
                                <li><a href="../classes/utils.nf.graph-mouse-event.html">utils.nf.graph-mouse-event</a></li>
                                <li><a href="../classes/utils.nf.graph-position.html">utils.nf.graph-position</a></li>
                                <li><a href="../classes/utils.nf.scroll-area-action-context.html">utils.nf.scroll-area-action-context</a></li>
                                <li><a href="../classes/utils.parse-property-expression.html">utils.parse-property-expression</a></li>
                            </ul>
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/scale-utils.html">scale-utils</a></li>
                                <li><a href="../modules/utils_nf_array-helpers.html">utils/nf/array-helpers</a></li>
                                <li><a href="../modules/utils_nf_svg-dom.html">utils/nf/svg-dom</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: app/components/nf-x-axis.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
import Ember from &#x27;ember&#x27;;
import HasGraphParent from &#x27;ember-nf-graph/mixins/graph-has-graph-parent&#x27;;
import RequireScaleSource from &#x27;ember-nf-graph/mixins/graph-requires-scale-source&#x27;;

import layout from &#x27;../templates/components/nf-x-axis&#x27;;

/**
  A component for adding a templated x axis to an &#x60;nf-graph&#x60; component.
  All items contained within this component are used to template each tick mark on the
  rendered graph. Tick values are supplied to the inner scope of this component on the
  view template via &#x60;tick&#x60;.

  ### Styling

  The main container will have a &#x60;nf-x-axis&#x60; class.
  A &#x60;orient-top&#x60; or &#x60;orient-bottom&#x60; container will be applied to the container
  depending on the &#x60;orient&#x60; setting.

  Ticks are positioned via a &#x60;&lt;g&gt;&#x60; tag, that will contain whatever is passed into it via
  templating, along with the tick line. &#x60;&lt;text&gt;&#x60; tags within tick templates do have some
  default styling applied to them to position them appropriately based off of orientation.

  ### Example

        {{#nf-graph width=500 height=300}}
          {{#nf-x-axis height=40}}
            &lt;text&gt;x is {{tick.value}}&lt;/text&gt;
          {{/nf-x-axis}}
        {{/nf-graph}}


  @namespace components
  @class nf-x-axis
  @extends Ember.Component
  @uses mixins.graph-has-graph-parent
  @uses mixins.graph-requires-scale-source
*/
export default Ember.Component.extend(HasGraphParent, RequireScaleSource, {
  tagName: &#x27;g&#x27;,

  layout: layout,
  template: null,

  useDefaultTemplate: Ember.computed.equal(&#x27;template&#x27;, null),

  attributeBindings: [&#x27;transform&#x27;],
  classNameBindings: [&#x27;orientClass&#x27;],
  classNames: [&#x27;nf-x-axis&#x27;],

  /**
    The height of the x axis in pixels.
    @property height
    @type Number
    @default 20
  */
  height: 20,

  /**
    The number of ticks to display
    @property tickCount
    @type Number
    @default 12
  */
  tickCount: 12,

  /**
    The length of the tick line (the small vertical line indicating the tick)
    @property tickLength
    @type Number
    @default 0
  */
  tickLength: 0,

  /**
    The spacing between the end of the tick line and the origin of the templated
    tick content
    @property tickPadding
    @type Number
    @default 5
  */
  tickPadding: 5,

  /**
    The orientation of the x axis. Value can be &#x60;&#x27;top&#x27;&#x60; or &#x60;&#x27;bottom&#x27;&#x60;.
    @property orient
    @type String
    @default &#x27;bottom&#x27;
  */
  orient: &#x27;bottom&#x27;,

  _tickFilter: null,

  /**
    An optional filtering function to allow more control over what tick marks are displayed.
    The function should have exactly the same signature as the function you&#x27;d use for an
    &#x60;Array.prototype.filter()&#x60;.

    @property tickFilter
    @type Function
    @default null
    @example

          {{#nf-x-axis tickFilter=myFilter}}
            &lt;text&gt;{{tick.value}}&lt;/text&gt;
          {{/nf-x-axis}}

    And on your controller:

          myFilter: function(tick, index, ticks) {
            return tick.value &lt; 1000;
          },

    The above example will filter down the set of ticks to only those that are less than 1000.
  */
  tickFilter: Ember.computed.alias(&#x27;_tickFilter&#x27;),

  /**
    The class applied due to orientation (e.g. &#x60;&#x27;orient-top&#x27;&#x60;)
    @property orientClass
    @type String
    @readonly
  */
  orientClass: Ember.computed(&#x27;orient&#x27;, function(){
    return &#x27;orient-&#x27; + this.get(&#x27;orient&#x27;);
  }),

  /**
    The SVG Transform applied to this component&#x27;s container.
    @property transform
    @type String
    @readonly
  */
  transform: Ember.computed(&#x27;x&#x27;, &#x27;y&#x27;, function(){
    var x = this.get(&#x27;x&#x27;) || 0;
    var y = this.get(&#x27;y&#x27;) || 0;
    return &#x60;translate(${x} ${y})&#x60;;
  }),

  /**
    The y position of this component&#x27;s container.
    @property y
    @type Number
    @readonly
  */
  y: Ember.computed(
    &#x27;orient&#x27;,
    &#x27;graph.paddingTop&#x27;,
    &#x27;graph.paddingBottom&#x27;,
    &#x27;graph.height&#x27;,
    &#x27;height&#x27;,
    function(){
      var orient = this.get(&#x27;orient&#x27;);
      var graphHeight = this.get(&#x27;graph.height&#x27;);
      var height = this.get(&#x27;height&#x27;);
      var paddingBottom = this.get(&#x27;graph.paddingBottom&#x27;);
      var paddingTop = this.get(&#x27;graph.paddingTop&#x27;);
      var y;

      if(orient === &#x27;bottom&#x27;) {
        y = graphHeight - paddingBottom - height;
      } else {
        y = paddingTop;
      }

      return y || 0;
    }
  ),

  /**
    This x position of this component&#x27;s container
    @property x
    @type Number
    @readonly
  */
  x: Ember.computed(&#x27;graph.graphX&#x27;, function(){
    return this.get(&#x27;graph.graphX&#x27;) || 0;
  }),

  init() {
    this._super(...arguments);

    Ember.deprecate(&#x27;Non-block form of tick is deprecated. Please add &#x60;as |tick|&#x60; to your template.&#x27;, this.get(&#x27;template.blockParams&#x27;));
  },

  /**
    The width of the component
    @property width
    @type Number
    @readonly
  */
  width: Ember.computed.alias(&#x27;graph.graphWidth&#x27;),

  /**
    Function to create the tick values. Can be overriden to provide specific values.
    @method tickFactory
    @param xScale {Function} a d3 scale function
    @param tickCount {Number} the number of ticks desired
    @param uniqueXData {Array} all x data represented, filted to be unique (used for ordinal cases)
    @param xScaleType {String} the scale type of the containing graph.
    @return {Array} an array of domain values at which ticks should be placed.
  */
  tickFactory: function(xScale, tickCount, uniqueXData, xScaleType) {
    return (xScaleType === &#x27;ordinal&#x27;) ? uniqueXData : xScale.ticks(tickCount);
  },

  /**
    A unique set of all x data on the graph
    @property uniqueXData
    @type Array
    @readonly
  */
  uniqueXData: Ember.computed(&#x27;graph.xData.@each&#x27;, function(){
    var xData = this.get(&#x27;graph.xData&#x27;);
    return xData.reduce(function(unique, d) {
      if(unique.indexOf(d) === -1) {
        unique.push(d);
      }
      return unique;
    }, []);
  }),

  /**
    The models for the ticks to display on the axis.
    @property ticks
    @type Array
    @readonly
  */
  ticks: Ember.computed(
    &#x27;tickCount&#x27;,
    &#x27;xScale&#x27;,
    &#x27;tickPadding&#x27;,
    &#x27;tickLength&#x27;,
    &#x27;height&#x27;,
    &#x27;orient&#x27;,
    &#x27;tickFilter&#x27;,
    &#x27;graph.xScaleType&#x27;,
    &#x27;uniqueXData&#x27;,
    function(){
      var tickCount = this.get(&quot;tickCount&quot;);
      var xScale = this.get(&quot;xScale&quot;);
      var tickPadding = this.get(&quot;tickPadding&quot;);
      var tickLength = this.get(&quot;tickLength&quot;);
      var height = this.get(&quot;height&quot;);
      var orient = this.get(&quot;orient&quot;);
      var tickFilter = this.get(&quot;tickFilter&quot;);
      var xScaleType = this.get(&quot;graph.xScaleType&quot;);
      var uniqueXData = this.get(&quot;uniqueXData&quot;);
      var ticks = this.tickFactory(xScale, tickCount, uniqueXData, xScaleType);
      var y1 = orient === &#x27;top&#x27; ? height : 0;
      var y2 = y1 + tickLength;
      var labely = orient === &#x27;top&#x27; ? (y1 - tickPadding) : (y1 + tickPadding);
      var halfBandWidth = (xScaleType === &#x27;ordinal&#x27;) ? xScale.rangeBand() / 2 : 0;
      var result = ticks.map(function(tick) {
        return {
          value: tick,
          x: xScale(tick) + halfBandWidth,
          y1: y1,
          y2: y2,
          labely: labely
        };
      });

      if(tickFilter) {
        result = result.filter(tickFilter);
      }

      return Ember.A(result);
    }
  ),

  /**
    Updates the graph&#x27;s xAxis property on willInsertElement
    @method _updateGraphXAxis
    @private
  */
  _updateGraphXAxis: Ember.on(&#x27;willInsertElement&#x27;, function(){
    this.set(&#x27;graph.xAxis&#x27;, this);
  }),

  /**
    The y position, in pixels, of the axis line
    @property axisLineY
    @type Number
    @readonly
  */
  axisLineY: Ember.computed(&#x27;orient&#x27;, &#x27;height&#x27;, function(){
    var orient = this.get(&#x27;orient&#x27;);
    var height = this.get(&#x27;height&#x27;);
    return orient === &#x27;top&#x27; ? height : 0;
  })

});

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
